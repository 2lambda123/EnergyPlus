<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Overview - EnergyPlus Documentation</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../favicon.ico">
    
    <link href="../../css/bootstrap-3.3.4.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.3.0.min.css" rel="stylesheet">
    <link href="../../css/prettify-1.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  </head>
  <body>
    <div class="container">
  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../.."><img alt="" src="../../img/EP_32x32.png"> EnergyPlus Documentation</a>
      </div>
      <div class="navbar-collapse collapse">
        <!-- Main navigation -->
        <ul class="nav navbar-nav">
        
          
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown">Intro & Application <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
            
              <li>
                <a href="../../GettingStarted/GettingStarted">Getting Started</a>
              </li>
            
              <li>
                <a href="../../Tips_and_Tricks_Using_EnergyPlus/Tips_and_Tricks_Using_EnergyPlus">Tips and Tricks for EnergyPlus</a>
              </li>
            
              <li>
                <a href="../../EMS_Application_Guide/EMS_Application_Guide">EMS Applications</a>
              </li>
            
              <li>
                <a href="../../ExternalInterfaces_Application_Guide/ExternalInterfaces_Application_Guide">External Interface Applications</a>
              </li>
            
              <li>
                <a href="../../PlantApplicationGuide/PlantApplicationGuide">Plant Applications</a>
              </li>
            
            </ul>
          </li>
          
        
          
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown">Input/Output Reference <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
            
              <li>
                <a href="../../InputOutputReference/01a-InputOutputReference">Input Output Reference - Vol 1</a>
              </li>
            
              <li>
                <a href="../../InputOutputReference/01b-InputOutputReference">Input Output Reference - Vol 2</a>
              </li>
            
              <li>
                <a href="../../InputOutputReference/01c-InputOutputReference">Input Output Reference - Vol 3</a>
              </li>
            
              <li>
                <a href="../../InputOutputReference/01d-InputOutputReference">Input Output Reference - Vol 4</a>
              </li>
            
              <li>
                <a href="../../InputOutputReference/02-HVACTemplates">HVACTemplates</a>
              </li>
            
              <li>
                <a href="../../InputOutputReference/03-Economics">Economics</a>
              </li>
            
              <li>
                <a href="../../InputOutputReference/04-Parametrics">Parametrics</a>
              </li>
            
              <li>
                <a href="../../InputOutputReference/05-InputForOutput">Input for Output</a>
              </li>
            
              <li>
                <a href="../../InputOutputReference/06-StandardOutputReports">Standard Output Reports</a>
              </li>
            
              <li>
                <a href="../../InputOutputReference/07-WeatherData">Weather Data</a>
              </li>
            
              <li>
                <a href="../../InputOutputReference/08-RunningEnergyPlus">Running EnergyPlus</a>
              </li>
            
              <li>
                <a href="../../InputOutputReference/09-Appendix">Appendices</a>
              </li>
            
            </ul>
          </li>
          
        
          
          <li class="dropdown active">
            <a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown">Engineering Reference <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
            
              <li class="active">
                <a href=".">Overview</a>
              </li>
            
              <li>
                <a href="../02-IntegratedSolution">Integrated Solution Manager</a>
              </li>
            
              <li>
                <a href="../03-SurfaceHeatBalance">Surface Heat Balance Manager</a>
              </li>
            
              <li>
                <a href="../04-AdvancedSurface">Advanced Surface Concepts</a>
              </li>
            
              <li>
                <a href="../05-Climate">Climate, Sky and Solar Calculation</a>
              </li>
            
              <li>
                <a href="../06-SolarRadiation">Solar Reflection</a>
              </li>
            
              <li>
                <a href="../07-Daylighting">Daylighting and Window Calcs</a>
              </li>
            
              <li>
                <a href="../08-AirHeatBalance">Air Heat Balance Manager</a>
              </li>
            
              <li>
                <a href="../09-BuildingSystemSimulation">Building System Simulation Manager</a>
              </li>
            
              <li>
                <a href="../10-Sizing">Sizing and Design Data</a>
              </li>
            
              <li>
                <a href="../OperationalFaults">Operational Faults</a>
              </li>
            
              <li>
                <a href="../11-DemandLimiting">Demand Limiting</a>
              </li>
            
              <li>
                <a href="../12-AlternativeModeling">Alternative Modeling Processes</a>
              </li>
            
              <li>
                <a href="../13-EncyclopaedicRefs">Encyclopedic Reference of Simulation Models</a>
              </li>
            
              <li>
                <a href="../13a-EncyclopaedicRefs"> - - - - Encyclopedia Volume 1</a>
              </li>
            
              <li>
                <a href="../13b-EncyclopaedicRefs"> - - - - Encyclopedia Volume 2</a>
              </li>
            
              <li>
                <a href="../13c-EncyclopaedicRefs"> - - - - Encyclopedia Volume 3</a>
              </li>
            
              <li>
                <a href="../13d-EncyclopaedicRefs"> - - - - Encyclopedia Volume 4</a>
              </li>
            
              <li>
                <a href="../13e-EncyclopaedicRefs"> - - - - Encyclopedia Volume 5</a>
              </li>
            
              <li>
                <a href="../13f-EncyclopaedicRefs"> - - - - Encyclopedia Volume 6</a>
              </li>
            
              <li>
                <a href="../14-OnSiteGeneration">On-SIte Generation</a>
              </li>
            
              <li>
                <a href="../15-PerformanceCurves">Performance Curves and Lookup Tables</a>
              </li>
            
              <li>
                <a href="../16-Economics">Economic Calculations</a>
              </li>
            
              <li>
                <a href="../17-SpecialModulesReporting">Special Modules and Reporting</a>
              </li>
            
            </ul>
          </li>
          
        
          
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown">Developer Guides <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
            
              <li>
                <a href="../../InterfaceDeveloper/InterfaceDeveloper">Interface Developer</a>
              </li>
            
              <li>
                <a href="../../ModuleDeveloper/ModuleDeveloper">Module Developer</a>
              </li>
            
            </ul>
          </li>
          
        
          
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown">Other <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
            
              <li>
                <a href="../../Acknowledgements/Acknowledgements">Acknowledgements</a>
              </li>
            
              <li>
                <a href="../../AuxiliaryPrograms/AuxiliaryPrograms">Auxiliary Programs</a>
              </li>
            
              <li>
                <a href="../../OutputDetailsAndExamples/OutputDetailsAndExamples">Output Details and Examples</a>
              </li>
            
              <li>
                <a href="../../Using_EnergyPlus_for_Compliance/Using_EnergyPlus_for_Compliance">Using E+ for Compliance</a>
              </li>
            
            </ul>
          </li>
          
        
        </ul>

        <!-- Search, Navigation and Repo links -->
        <ul class="nav navbar-nav navbar-right">
        
        </ul>
      </div>
    </div>
  </nav>
</div>
    <div class="container">
      <div class="row">
        <div class="col-md-3">
          <div class="bs-docs-sidebar hidden-print affix well" role="complementary">
  <ul class="nav">
  
    <li class="main active"><a href="#overview">Overview</a>
      <ul class="nav">
        
        <li><a href="#document-overview">Document Overview</a></li>
        
        <li><a href="#general-modeling-overview">General Modeling Overview</a></li>
        
        <li><a href="#simulation-manager">Simulation Manager</a></li>
        
        <li><a href="#warmup-convergence">Warmup Convergence</a></li>
        
      </ul>
    </li>
  
  </ul>
  <div class="home-btn">
    <a class="btn btn-default" role="button" href="https://github.com/NREL/EnergyPlus">Back to EnergyPlus</a>
  </div>
</div>
        </div>
        <div class="col-md-9" role="main">
          <script>
           (function() {
            var cx = '007045650438215436378:sghdz0ne6rg';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
           })();
          </script>
          <gcse:search></gcse:search>
          <p><img alt="" src="../../EngineeringReference/media/ep.gif" /></p>
<p><br/>
<p><h1>EnergyPlus<sup>TM</sup> Documentation</h1></p>
<hr>
<h1>Engineering Reference</h1>
<h2>The Reference to EnergyPlus Calculations</h2>
<br/>
<p><i>(in case you want or need to know)</i></p>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<p><small>COPYRIGHT (c) 1996-2015 THE BOARD OF TRUSTEES OF THE UNIVERSITY OF ILLINOIS AND THE REGENTS OF THE UNIVERSITY OF CALIFORNIA THROUGH THE ERNEST ORLANDO LAWRENCE BERKELEY NATIONAL LABORATORY. ALL RIGHTS RESERVED. NO PART OF THIS MATERIAL MAY BE REPRODUCED OR TRANSMITTED IN ANY FORM OR BY ANY MEANS WITHOUT THE PRIOR WRITTEN PERMISSION OF THE UNIVERSITY OF ILLINOIS OR THE ERNEST ORLANDO LAWRENCE BERKELEY NATIONAL LABORATORY. ENERGYPLUS IS A TRADEMARK OF THE US DEPARTMENT OF ENERGY.</small></p>
<p style="page-break-after:always;"></p>
<div id="generated-toc"></div>
<p style="page-break-after:always;"></p></p>
<h1 id="overview">Overview</h1>
<h2 id="document-overview">Document Overview</h2>
<p>This document is organized to give you the best possible look into the EnergyPlus calculations. First, the concepts of modeling in EnergyPlus are presented. These include descriptions of the zone heat balance process, air loop/plant loop processes as well as other important processes for the building simulation.</p>
<p>Discussions during the modeling process may reference specific “object names” as found in the Input/Output Reference document.</p>
<p>The remainder of the document focuses on individual models.</p>
<h2 id="general-modeling-overview">General Modeling Overview</h2>
<p>The EnergyPlus program is a collection of many program modules that work together to calculate the energy required for heating and cooling a building using a variety of systems and energy sources. It does this by simulating the building and associated energy systems when they are exposed to different environmental and operating conditions. The core of the simulation is a model of the building that is based on fundamental heat balance principles. Since it is relatively meaningless to state: “based on fundamental heat balance principles”, the model will be described in greater detail in later sections of this document in concert with the FORTRAN code which is used to describe the model. It turns out that the model itself is relatively simple compared with the data organization and control that is needed to simulate the great many combinations of system types, primary energy plant arrangements, schedules, and environments. The next section shows this overall organization in schematic form. Later sections will expand on the details within the blocks of the schematic.</p>
<p><img alt="" src="../../EngineeringReference/media/image1.png" /></p>
<p>Figure 1. EnergyPlus Program Schematic</p>
<h2 id="simulation-manager">Simulation Manager</h2>
<p>The simulation manager of EnergyPlus is contained in a single module. The main subroutine is shown below. Flow within the entire program is managed using a series of flags. These paired flags, in order (from the highest to the lowest) are:</p>
<p>Table 1. Simulation Flags</p>
<table class="table table-striped">
<tr>
<td>BeginSimulationFlag</td>
<td>EndSimulationFlag</td>
</tr>
<tr>
<td>BeginEnvironmentFlag</td>
<td>EndEnvironmentFlag(one to many days)</td>
</tr>
<tr>
<td>BeginDayFlag</td>
<td>EndDayFlag</td>
</tr>
<tr>
<td>BeginHourFlag</td>
<td>EndHourFlag</td>
</tr>
<tr>
<td>BeginTimeStepFlag</td>
<td>EndTimeStepFlag</td>
</tr>
</table>

<p>There is also a <strong>WarmupFlag</strong> to signal that the program is in warmup state. The operation of these flags can be seen in the following subroutine. The advantage of using the flag system is that any subroutine throughout the code can determine the exact state of the simulation by checking the status of the flags.</p>
<pre><code>SUBROUTINE ManageSimulation     ! Main driver routine for this module
BeginSimFlag = .TRUE.
  EndSimFlag = .FALSE.
  CALL OpenOutputFiles
  CALL GetProjectData
  CALL GetEnvironmentInfo                 ! Get the number and type of Environments
  DO Envrn = 1, NumOfEnvrn        ! Begin environment loop ...
    BeginEnvrnFlag = .TRUE.
    EndEnvrnFlag   = .FALSE.
    WarmupFlag     = .TRUE.
    DayOfSim       =  0
    DO WHILE ((DayOfSim.LT.NumOfDayInEnvrn).OR.(WarmupFlag))  ! Begin day loop ...
      DayOfSim     = DayOfSim + 1
      BeginDayFlag = .TRUE.
      EndDayFlag   = .FALSE.
      DO HourOfDay = 1, 24      ! Begin hour loop ...
        BeginHourFlag = .TRUE.
        EndHourFlag   = .FALSE.
          DO TimeStep = 1, NumOfTimeStepInHour  ! Begin time step (TINC) loop ...
          BeginTimeStepFlag = .TRUE.
          EndTimeStepFlag   = .FALSE.
          ! Set the End\_\_Flag variables to true if necessary. Note that each flag builds on
          ! the previous level. EndDayFlag cannot be .true. unless EndHourFlag is also .true., etc.
          ! Note that the EndEnvrnFlag and the EndSimFlag cannot be set during warmup.
          ! Note also that BeginTimeStepFlag, EndTimeStepFlag, and the
          ! SubTimeStepFlags can/will be set/reset in the HVAC Manager.
          IF ((TimeStep.EQ.NumOfTimeStepInHour)) THEN
            EndHourFlag = .TRUE.
            IF (HourOfDay.EQ.24) THEN
              EndDayFlag = .TRUE.
              IF ((.NOT.WarmupFlag).AND.(DayOfSim.EQ.NumOfDayInEnvrn)) THEN
                EndEnvrnFlag = .TRUE.
                IF (Envrn.EQ.NumOfEnvrn) THEN
                  EndSimFlag = .TRUE.
                END IF
              END IF
            END IF
          END IF
          CALL ManageWeather
          CALL ManageHeatBalance
          BeginHourFlag  = .FALSE.
          BeginDayFlag   = .FALSE.
          BeginEnvrnFlag = .FALSE.
          BeginSimFlag   = .FALSE.
        END DO                              ! ... End time step (TINC) loop.
      END DO                    ! ... End hour loop.
    END DO                      ! ... End day loop.
  END DO                        ! ... End environment loop.
  CALL CloseOutputFiles
  RETURN
END SUBROUTINE ManageSimulation
</code></pre>

<h2 id="warmup-convergence">Warmup Convergence</h2>
<p>Since everything in EnergyPlus is based on the foundation of the loads simulation, it stands to reason that any inaccuracies in the loads calculation will result in inaccuracies of similar or larger magnitude in the HVAC calculations. In the presumably limited cases where convergence was not truly achieved before the actual simulation began, it is unknown how much error would be introduced into the results. While simulations that last longer (annual vs. design day) will hopefully have any initial condition problems balanced by the shear number of days in the simulation, shorter simulations—particularly those used for sizing—could result in relatively large errors. The simulation results could be unreliable and inaccurate when steady periodic conditions are not achieved. Therefore, it is important to properly determine when there is enough temperature and flux history terms to start an EnergyPlus simulation since this has a potential economic and energy impact on buildings that use EnergyPlus in design.</p>
<p>EnergyPlus determines warmup convergence in the following manner as shown in the Figure 2 below. The process of the convergence checks begins by tracking four parameters such including the maximum zone air temperature, the minimum zone air temperature, the maximum heating load, and the maximum cooling load for individual zone. It is note that these convergence checks are only in effective in simulations with at least one zone since the criteria is solely based on the maximum and minimum values obtained from an individual zone. Differences in these parameters between two consecutive days are then compared with the convergence tolerance values at the end of the day during the warmup period. For example, the maximum and minimum air temperature and the percentage difference of zone load for each zone at 9:00AM during the second to last warmup is compared to the values at 9:00AM last warmup day as follows:</p>
<div>$${T_{\max ,prev}} - {T_{\max }} < {T_{tol}}$$</div>

<div>$${T_{\min ,prev}} - {T_{\min }} < {T_{tol}}$$</div>

<div>$$\frac{{{q_h} - {q_{h,prev}}}}{{{q_h}}} < {q_{tol}}$$</div>

<div>$$\frac{{{q_c} - {q_{c,prev}}}}{{{q_c}}} < {q_{tol}}$$</div>

<p>where Tmax,prev is the maximum zone temperature of previous day, Tmax is the maximum zone temperature of current day, Ttol is the value of temperature tolerance, qh,prev is the maximum heating load of previous day, qh, is the maximum heating load of current day, qtol is the value of load tolerance, qc,prev is the maximum cooling load of previous day, and qc, is the maximum cooling load of current day.</p>
<p>Note that a minimum load of 100W is used to establish a fraction for the maximum loads when they are less than the minimum. This is done to avoid a false negative indication for the percentage load difference that may appear when zonal loads are very small. The convergence checks are repeated until passed for all zones. EnergyPlus assumes that the warmup period has been reached steady-periodic when these four parameters are within tolerance. Finally, temperature and load differences between the last two warmup days for individual zone at each time step in the last warmup day are reported so that users can easily track whether or not the warmup period has converged. The input parameters and output related to the warmup period are discussed in the Input-Output Reference.</p>
<p><img alt="" src="../../EngineeringReference/media/image6.png" /></p>
<p>Figure 2. Flows of Warmup Convergence Checks</p>

          <div class="footer">
  <p class="text-center"><a href="https://unmethours.com/questions/scope:all/sort:activity-desc/tags:energyplus/">Get Help</a> | <a href="https://www.energyplus.gov/">More Information</a></p>
  <p class="text-center"><a href="https://github.com/NREL/EnergyPlus">EnergyPlus</a> is developed in collaboration by NREL, LBNL, ORNL, and PNNL.</p>
  <p class="text-center"><a href="http://www.nrel.gov">NREL</a> is a National Laboratory of the U.S. Department of Energy, Office of Energy Efficiency and Renewable Energy, operated by the Alliance for Sustainable Energy, LLC.</p>
  <p class="text-center"><a href="#">Back to Top</a></p>
</div>
        </div>
      </div>
    </div>
    

    <script src="../../js/jquery-2.1.3.min.js"></script>
    <script src="../../js/bootstrap-3.3.4.min.js"></script>
    <script src="../../js/bootstrap-hover-dropdown-2.1.3.min.js"></script>
    <script src="../../js/prettify-1.0.min.js"></script>
    <script src="../../js/base.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        TeX: { equationNumbers: {autoNumber: "all"}},
        showMathMenu: true,
        showMathMenuMSIE: false,
        "HTML-CSS": {
          imageFont: null,
          preferredFont: null
        },
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });
    </script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js'></script>
    <script>
      $(function() {
        return $("h2, h3, h4, h5, h6").each(function(i, el) {
          var $el, icon, id;
          $el = $(el);
          id = $el.attr('id');
          icon = '<i class="fa fa-link"></i>';
          if (id) {
            return $el.prepend($("<a />").addClass("header-link").attr("href", "#" + id).html(icon));
          }
        });
      });
    </script>
  </body>
</html>